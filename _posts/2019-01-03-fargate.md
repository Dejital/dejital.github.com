---
layout: post
title: Running an ASP.NET Core Application in a Docker container in Amazon ECS Fargate
---

<link rel="stylesheet" type="text/css" href="/assets/css/coding-article.css">

### Table of Contents

1. Requirements to start
2. Dockerize a C# application
3. Create an ECR Container Repository
4. Create an ECS Cluster and Service
5. Create an ECS Task Definition
6. Taking things further (spinning up additional tasks)
7. Conclusion

### Requirements to start

There are several major technologies required to progress with this article. Installing each one of them on a development machine can pose its own challenges, so the installation will not be covered. All technologies are multi-platform, meaning they work in all of Windows, Mac OS and even Linux. We will work under the assumption that all of them (as listed below) are installed and available.

1. ASP.NET Core SDK
2. Docker
3. Amazon AWS CLI

### Dockerize a C# application

The initial application will be a very impressive serverless "Hello World!". If that doesn't impress you, feel free to use your own service, just keep in mind that networking or access to other Amazon services may require additional setup that won't be covered in this article.

We will be using the dotnet CLI to generate the new project, alternatively use Visual Studio's __Console App (.NET Core)__ template project.

Open the terminal or PowerShell command line and type the following to generate our console app:

```
dotnet new console --name fargate-app
```

The `console` argument indicates we are using the console app template, similar to Visual Studio's template project. `--name fargate-app` indicates we intend to name the app __fargate-app__ which also creates a folder of the same name.

Open up `Program.cs` to add some delay before the app exits. The delay will ultimately let us watch how quickly Amazon Fargate spins up new instances of programs after they exit or crash.

```csharp
using System;

namespace fargate_app
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Hello World!");
            Task.Delay(TimeSpan.FromSeconds(30));
            Console.WriteLine("Exiting!");
        }
    }
}
```

